# å…¶ä»– {#others}

## æ›´æ”¹é è¨­çš„æ–‡æœ¬ç·¨è¼¯å™¨ {#change-default-text-editor}

é€™å€‹æŒ‡ä»¤å¯ä»¥è®Šæ›´ç³»çµ±ç·¨è¼¯æ–‡ä»¶æ‰€ç”¨çš„ç¨‹å¼

``` bash
sudo update-alternatives --config editor
```

æŒ‰äº† Enterâ†© ä¹‹å¾Œï¼Œæœƒå‡ºç¾ç¾åœ¨å¯ç”¨çš„ç·¨è¼¯å™¨ï¼Œè¼¸å…¥å°æ‡‰çš„ç·¨è™Ÿå³å¯è®Šæ›´ã€‚æœ‰æ¨™ `*` è™Ÿçš„ç·¨è¼¯å™¨ç‚ºç›®å‰è¨­å®šçš„é è¨­ç·¨è¼¯å™¨ã€‚

``` console_output
There are 4 choices for the alternative editor (providing /usr/bin/editor).

  Selection    Path                Priority   Status
------------------------------------------------------------
  0            /bin/nano            40        auto mode
  1            /bin/ed             -100       manual mode
  2            /bin/nano            40        manual mode
* 3            /usr/bin/vim.basic   30        manual mode
  4            /usr/bin/vim.tiny    15        manual mode

Press <enter> to keep the current choice[*], or type selection number: 3
```

<!--# TODO: åˆ©ç”¨ SSH  å‚³è¼¸æª”æ¡ˆ -->

<!--## sharedfolder-->

## é—œæ–¼å¥—ä»¶ç‰ˆæœ¬ {#about-package-versions}

### å®‰è£ php & php-mysql æ’ä»¶ {#install-php-and-php-mysql-plugin}

å…ˆç¢ºèª `php` æ˜¯ä¸æ˜¯æˆ‘å€‘è¦å®‰è£çš„ç‰ˆæœ¬

``` {.bash .prefixed}
sudo apt info php
```

å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰ `php` çš„ä¾è³´å¥—ä»¶æ˜¯ `php7.4`ï¼Œä»£è¡¨å°‡å®‰è£çš„ç‰ˆæœ¬ç‚º `php7.4`

``` console_output
Package: php
Version: 2:7.4+75
Priority: optional
Section: php
Source: php-defaults (75)
Origin: Ubuntu
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Original-Maintainer: Debian PHP Maintainers <team+pkg-php@tracker.debian.org>
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Installed-Size: 13.3 kB
Depends: php7.4
Download-Size: 2,712 B
APT-Sources: http://tw.archive.ubuntu.com/ubuntu focal/main amd64 Packages
Description: server-side, HTML-embedded scripting language (default)
 PHP (recursive acronym for PHP: Hypertext Preprocessor) is a widely-used
 open source general-purpose scripting language that is especially suited
 for web development and can be embedded into HTML.
 .
 This package is a dependency package, which depends on latest stable
 PHP version (currently 7.4).
```

æ¥è‘—ï¼Œæˆ‘å€‘å†æŸ¥è©¢ä¸€æ¬¡ `php7.4` æœƒå®‰è£ä»€éº¼æ±è¥¿

``` {.bash .prefixed}
sudo apt info php7.4
```

é€™è£¡å¯ä»¥çœ‹åˆ° `php7.4` å®‰è£äº†æœƒå®‰è£ä¸€äº›ä½¿ php7.4 é †åˆ©é‹ä½œçš„ä¾è³´å¥—ä»¶ï¼Œåƒæ˜¯ `libapache2-mod-php7.4`ã€`php7.4-fpm`ã€`php7.4-cgi` èˆ‡ `php7.4-common`

``` console_output
Package: php7.4
Version: 7.4.3-4ubuntu2.5
Priority: optional
Section: php
Origin: Ubuntu
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Original-Maintainer: Debian PHP Maintainers <team+pkg-php@tracker.debian.org>
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Installed-Size: 73.7 kB
Provides: php
Depends: libapache2-mod-php7.4 | php7.4-fpm | php7.4-cgi, php7.4-common
Homepage: http://www.php.net/
Download-Size: 9,244 B
APT-Sources: http://tw.archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages
Description: server-side, HTML-embedded scripting language (metapackage)
 This package is a metapackage that, when installed, guarantees that you
 have at least one of the four server-side versions of the PHP interpreter
 installed. Removing this package won't remove PHP from your system, however
 it may remove other packages that depend on this one.
 .
 PHP (recursive acronym for PHP: Hypertext Preprocessor) is a widely-used
 open source general-purpose scripting language that is especially suited
 for web development and can be embedded into HTML.
```

ä¸€æ¨£åœ°ï¼Œé€™è£¡ä¹Ÿç”¨ç›¸åŒçš„æŒ‡ä»¤æŸ¥è©¢ `php-mysql` å¥—ä»¶

``` console_output
sudo apt info php-mysql
```

å› ç‚º `php` å·²ç¶“æœ‰ `php-common` ä¾è³´çš„ï¼Œæ‰€ä»¥å¾…æœƒå…©å€‹å¥—ä»¶ä¸€èµ·å®‰è£æ™‚ï¼Œåªæœƒå®‰è£ä¸€å€‹ `php-common`

``` console_output
Package: php-mysql
Version: 2:7.4+75
Priority: optional
Section: php
Source: php-defaults (75)
Origin: Ubuntu
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Original-Maintainer: Debian PHP Maintainers <team+pkg-php@tracker.debian.org>
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Installed-Size: 13.3 kB
Depends: php-common, php7.4-mysql
Task: lamp-server
Download-Size: 2,000 B
APT-Sources: http://tw.archive.ubuntu.com/ubuntu focal/main amd64 Packages
Description: MySQL module for PHP [default]
 This package provides a MySQL module for PHP.
 .
 PHP (recursive acronym for PHP: Hypertext Preprocessor) is a widely-used
 open source general-purpose scripting language that is especially suited
 for web development and can be embedded into HTML.
 .
 This package is a dependency package, which depends on Debian's default
 PHP version (currently 7.4).
```

ç¢ºèªå®Œæˆ‘å€‘è¦å®‰è£çš„ç‰ˆæœ¬æ˜¯å¦æ­£ç¢ºå¾Œï¼Œç”¨å¥—ä»¶ç®¡ç†ç¨‹å¼ `apt` å®‰è£å¥—ä»¶ã€‚

``` {.bash .prefixed}
sudo apt install php php-mysql --yes
```

ç¢ºèª `php` æ˜¯å¦å®‰è£å®Œæˆï¼Œå¯ä»¥ç”¨ `which` æŒ‡ä»¤ç¢ºèªï¼š

``` {.bash .prefixed}
which php
```

ç•¶ç³»çµ±ä¸­æœ‰å®‰è£è¤‡æ•¸å€‹ç‰ˆæœ¬çš„ php æ™‚ï¼Œphp åŸ·è¡Œæª”çš„ä½ç½®å¯èƒ½æœƒæœ‰æ‰€ä¸åŒã€‚åŒæ¨£åœ°åœ¨ç¬¬ 5 ç« [è¨­ç½® Python 3 ç’°å¢ƒ]æ™‚ä¹Ÿæœƒé‡åˆ°ã€‚

## Mysql 8.0 root å¯†ç¢¼é‡è¨­ {#mysql-8-reset-root-password}

å…ˆå»ºç«‹ä¸€å€‹å«æœ‰æ”¹è®Š root å¯†ç¢¼çš„ sql èªæ³•æ–‡å­—æª”æ¡ˆ

``` {.bash .prefixed}
vim mysql-init
```

``` sqlmysql
ALTER USER 'root'@'localhost' IDENTIFIED with caching_sha2_password by '<æ–°çš„ root å¯†ç¢¼>';
```

å¦‚å­˜å¥½å¾Œå°‡æ“æœ‰è€…èˆ‡ä½¿ç”¨è€…ç¾¤çµ„æ”¹æˆ `mysql` å¾Œï¼Œç§»è‡³ `/tmp` è³‡æ–™å¤¾ï¼Œä½¿ mysql ä½¿ç”¨è€…å¯ä»¥å­˜å–ã€‚

``` {.bash .prefixed}
chown mysql.mysql mysql-init && mv mysql-init /tmp
```

åˆ‡æ›è‡³ root ä½¿ç”¨è€…é€²è¡Œå¾ŒçºŒæ“ä½œ

``` {.bash .prefixed}
sudo su -
```

å°‡ç›®å‰çš„ mysql é—œé–‰

``` {.bash .prefixed_root}
killall -9 mysqld
```

æˆ–æ˜¯ä½¿ç”¨ `systemctl` æŒ‡ä»¤é—œé–‰ mysql æœå‹™

`{.bash prefixed} systemctl stop mysql.service`

æ¥è‘—ä½¿ç”¨ mysqld æŒ‡ä»¤å•Ÿå‹• mysql ä¸¦æŒ‡å®š `--user`ã€`--defaults-file` èˆ‡ `--init-file` åƒæ•¸ã€‚

``` {.bash .prefixed_root}
mysqld --defaults-file=/etc/mysql/mysql.conf.d/mysqld.cnf \ 
--user=mysql \ 
--init-file=/tmp/mysql-init &
```

-   `--defaults-file`: MySQL é è¨­å•Ÿå‹•çš„è¨­å®šæª”æ¡ˆ

-   `--user`: ä»¥ä½¿ç”¨è€… `mysql` åŸ·è¡Œ

-   `--init-file`: åˆå§‹åŒ–æ™‚ï¼ŒåŸ·è¡Œ `/tmp/mysql-init` æŒ‡ä»¤ï¼Œè®Šæ›´å¯†ç¢¼

-   `&`: å°‡ mysql deamon æ”¾è‡³èƒŒæ™¯åŸ·è¡Œã€‚

æ­¤æ™‚ï¼Œæ‡‰è©²å¯ä»¥æ­£å¸¸ç™»å…¥äº†ã€‚

::: {.infobox .caution}
å¦‚æœä¸è¡Œçš„è©±ï¼Œè«‹æª¢æŸ¥ä½æ–¼ `/var/log/mysql/error.log` çš„éŒ¯èª¤ç´€éŒ„ï¼Œå¦‚æœæœ‰çœ‹åˆ°é¡ä¼¼ `/var/run/mysqld` çš„éŒ¯èª¤ï¼Œéœ€è¦æ‰‹å‹•å»ºç«‹è³‡æ–™å¤¾ï¼Œä¸¦æŠŠæ¬Šé™è®Šæ›´ç‚º `mysql` ç”¨æˆ¶çš„æ¬Šé™ã€‚ æ“ä½œå®Œä¹‹å¾Œå†å¾é—œé–‰ mysql æœå‹™é–‹å§‹ï¼Œå†å˜—è©¦ä¸€æ¬¡ã€‚

åƒè€ƒæŒ‡ä»¤å¦‚ä¸‹ï¼š

``` {.bash .prefixed_root}
mkdir /var/run/mysqld && chown mysql.mysql /var/run/mysqld
```
:::

æœ€å¾Œä»¥æ­£å¸¸çš„æœå‹™å•Ÿå‹• mysqlï¼š

``` {.bash .prefixed_root}
systemctl restart mysql.service
```

é€€å‡º root å¸³è™Ÿ

``` {.bash .prefixed_root}
exit
```

è©¦ä»¥æ–°å¯†ç¢¼ç™»å…¥ mysql root å¸³è™Ÿï¼š

``` {.bash .prefixed}
mysql -u root -p
```

æˆåŠŸ ğŸŠ

``` console_output
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 17
Server version: 8.0.26-0ubuntu0.20.04.3 (Ubuntu)

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```


## jupyterhub C/C++ é‹ç®—æ ¸å¿ƒ {#jupyterhub-cc-plus-plus-kernel}

``` {.bash .prefixed}
sudo vim /opt/conda/envs/c_cpp.yml
```

::: code-label
/opt/conda/envs/c_cpp.yml
:::

``` yaml
name: c-cpp
channels:
  - defaults
  - conda-forge
dependencies:
  - xeus-cling
  - python=3.*
  - pip
  - ipykernel
prefix: /opt/conda/envs/c-cpp
```

``` {.bash .prefixed}
sudo conda env create -f c_cpp.yml
```

``` {.bash .prefixed}
sudo jupyter kernelspec install \
    /opt/conda/envs/c-cpp/share/jupyter/kernels/xcpp11 --sys-prefix
```

``` {.bash .prefixed}
sudo jupyter kernelspec install \
    /opt/conda/envs/c-cpp/share/jupyter/kernels/xcpp14 --sys-prefix
```

``` {.bash .prefixed}
sudo jupyter kernelspec install \
    /opt/conda/envs/c-cpp/share/jupyter/kernels/xcpp17 --sys-prefix
```

<!--# Scanf() problem https://github.com/brendan-rius/jupyter-c-kernel/issues/3 -->

``` {.bash .prefixed}
sudo /opt/conda/envs/c-cpp/bin/python3.9 -m \
    pip install git+https://github.com/XaverKlemenschits/jupyter-c-kernel.git
```

``` {.bash .prefixed}
sudo vim /opt/conda/envs/c-cpp/share/jupyter/kernels/c/kernel.json
```

::: code-label
/opt/conda/envs/c-cpp/share/jupyter/kernels/c/kernel.json
:::

``` json
{
  "display_name": "C",
  "argv": [
      "/opt/conda/envs/c-cpp/bin/python3",
      "-m",
      "jupyter_c_kernel",
      "-f",
      "{connection_file}"
  ],
  "language": "C"
}
```

``` {.bash .prefixed}
sudo mv ~/Downloads/logo** /opt/conda/envs/c-cpp/share/jupyter/c/
```

::: flex-columns
```{r, fig.cap='C èªè¨€æ ¸å¿ƒåœ–æ¨™ï¼Œ32x32', out.width="", echo=FALSE}
knitr::include_graphics(path = "figures/icons/logo-32x32.png")
```

```{r, fig.cap='C èªè¨€æ ¸å¿ƒåœ–æ¨™ï¼Œ64x64', out.width="", echo=FALSE}
knitr::include_graphics(path = "figures/icons/logo-64x64.png")
```
:::

``` {.bash .prefixed}
ls -al /opt/conda/envs/c-cpp/share/jupyter/kernels/c
```

``` console_output
drwxrwxr-x 2 root root 4096 Oct 23 17:20 ./
drwxrwxr-x 7 root root 4096 Oct 23 15:31 ../
-rw-rw-r-- 1 root root  181 Oct 23 15:26 kernel.json
-rw-r--r-- 1 root root 1536 Oct 23 17:02 logo-32x32.png
-rw-r--r-- 1 root root 4079 Oct 23 17:02 logo-64x64.png
```

``` {.bash .prefixed}
sudo jupyter kernelspec install /opt/conda/envs/c-cpp/share/jupyter/c --sys-prefix
```

```{r, fig.cap='jupyterhub åŠ ä¸Šäº† C èˆ‡ CPP æ ¸å¿ƒçš„é é¢'}
knitr::include_graphics(path = 'figures/jupyterlab_c_cpp_kernel.png')
```
```
