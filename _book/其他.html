<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>C 其他 | MCU ASIS Ubuntu 系統安裝指南</title>
<meta name="author" content="Chiawei Chen">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="C 其他 | MCU ASIS Ubuntu 系統安裝指南">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="C 其他 | MCU ASIS Ubuntu 系統安裝指南">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Noto_Sans_TC-0.4.2/font.css" rel="stylesheet">
<link href="libs/Source_Code_Pro-0.4.2/font.css" rel="stylesheet">
<link href="libs/Noto_Serif_TC-0.4.2/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="bs4_style.css">
<meta name="description" content="C.1 更改預設的文本編輯器 這個指令可以變更系統編輯文件所用的程式 sudo update-alternatives --config editor 按了 Enter↩︎ 之後，會出現現在可用的編輯器，輸入對應的編號即可變更。有標 * 號的編輯器為目前設定的預設編輯器。 There are 4 choices for the alternative editor (providing...">
<meta property="og:description" content="C.1 更改預設的文本編輯器 這個指令可以變更系統編輯文件所用的程式 sudo update-alternatives --config editor 按了 Enter↩︎ 之後，會出現現在可用的編輯器，輸入對應的編號即可變更。有標 * 號的編輯器為目前設定的預設編輯器。 There are 4 choices for the alternative editor (providing...">
<meta name="twitter:description" content="C.1 更改預設的文本編輯器 這個指令可以變更系統編輯文件所用的程式 sudo update-alternatives --config editor 按了 Enter↩︎ 之後，會出現現在可用的編輯器，輸入對應的編號即可變更。有標 * 號的編輯器為目前設定的預設編輯器。 There are 4 choices for the alternative editor (providing...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">MCU ASIS Ubuntu 系統安裝指南</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">引言</a></li>
<li class="book-part">基礎建設</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> 虛擬主機</a></li>
<li><a class="" href="ubuntu-%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A8%AD%E5%AE%9A.html"><span class="header-section-number">2</span> Ubuntu 的基本設定</a></li>
<li class="book-part">軟體安裝</li>
<li><a class="" href="lamp-%E7%A8%8B%E5%BC%8F%E9%9B%86.html"><span class="header-section-number">3</span> LAMP 程式集</a></li>
<li><a class="" href="rstudio-rshiny-server.html"><span class="header-section-number">4</span> RStudio &amp; RShiny Server</a></li>
<li><a class="" href="jupyterlab-on-jupyterhub.html"><span class="header-section-number">5</span> JupyterLab on JupyterHub</a></li>
<li class="book-part">附錄</li>
<li><a class="" href="%E7%9B%B8%E9%97%9C%E8%BB%9F%E9%AB%94.html"><span class="header-section-number">A</span> 相關軟體</a></li>
<li><a class="" href="%E5%B8%B3%E8%99%9F%E7%AE%A1%E7%90%86.html"><span class="header-section-number">B</span> 帳號管理</a></li>
<li><a class="active" href="%E5%85%B6%E4%BB%96.html"><span class="header-section-number">C</span> 其他</a></li>
<li><a class="" href="%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99.html">參考資料</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/exkuretrol/MCU-ASIS">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="其他" class="section level1" number="8">
<h1>
<span class="header-section-number">C</span> 其他<a class="anchor" aria-label="anchor" href="#%E5%85%B6%E4%BB%96"><i class="fas fa-link"></i></a>
</h1>
<div id="更改預設的文本編輯器" class="section level2" number="8.1">
<h2>
<span class="header-section-number">C.1</span> 更改預設的文本編輯器<a class="anchor" aria-label="anchor" href="#%E6%9B%B4%E6%94%B9%E9%A0%90%E8%A8%AD%E7%9A%84%E6%96%87%E6%9C%AC%E7%B7%A8%E8%BC%AF%E5%99%A8"><i class="fas fa-link"></i></a>
</h2>
<p>這個指令可以變更系統編輯文件所用的程式</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb286-1"><a href="%E5%85%B6%E4%BB%96.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> update-alternatives <span class="at">--config</span> editor</span></code></pre></div>
<p>按了 Enter↩︎ 之後，會出現現在可用的編輯器，輸入對應的編號即可變更。有標 <code>*</code> 號的編輯器為目前設定的預設編輯器。</p>
<pre class="console_output"><code>There are 4 choices for the alternative editor (providing /usr/bin/editor).

  Selection    Path                Priority   Status
------------------------------------------------------------
  0            /bin/nano            40        auto mode
  1            /bin/ed             -100       manual mode
  2            /bin/nano            40        manual mode
* 3            /usr/bin/vim.basic   30        manual mode
  4            /usr/bin/vim.tiny    15        manual mode

Press &lt;enter&gt; to keep the current choice[*], or type selection number: 3</code></pre>
<!--# TODO: 利用 SSH  傳輸檔案 -->
</div>
<div id="mysql-8.0-root-密碼重設" class="section level2" number="8.2">
<h2>
<span class="header-section-number">C.2</span> Mysql 8.0 root 密碼重設<a class="anchor" aria-label="anchor" href="#mysql-8.0-root-%E5%AF%86%E7%A2%BC%E9%87%8D%E8%A8%AD"><i class="fas fa-link"></i></a>
</h2>
<p>先建立一個含有改變 root 密碼的 sql 語法文字檔案</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode bash prefixed"><code class="sourceCode bash"><span id="cb288-1"><a href="%E5%85%B6%E4%BB%96.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="ex">vim</span> mysql-init</span></code></pre></div>
<div class="sourceCode" id="cb289"><pre class="sourceCode sqlmysql"><code class="sourceCode sqlmysql"><span id="cb289-1"><a href="%E5%85%B6%E4%BB%96.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="fu">USER</span> <span class="st">'root'</span>@<span class="st">'localhost'</span> IDENTIFIED <span class="kw">with</span> caching_sha2_password <span class="kw">by</span> <span class="st">'&lt;新的 root 密碼&gt;'</span>;</span></code></pre></div>
<p>如存好後將擁有者與使用者群組改成 <code>mysql</code> 後，移至 <code>/tmp</code> 資料夾，使 mysql 使用者可以存取。</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode bash prefixed"><code class="sourceCode bash"><span id="cb290-1"><a href="%E5%85%B6%E4%BB%96.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chown</span> mysql.mysql mysql-init <span class="kw">&amp;&amp;</span> <span class="fu">mv</span> mysql-init /tmp</span></code></pre></div>
<p>切換至 root 使用者進行後續操作</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode bash prefixed"><code class="sourceCode bash"><span id="cb291-1"><a href="%E5%85%B6%E4%BB%96.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> su <span class="at">-</span></span></code></pre></div>
<p>將目前的 mysql 關閉</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode bash prefixed_root"><code class="sourceCode bash"><span id="cb292-1"><a href="%E5%85%B6%E4%BB%96.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">killall</span> <span class="at">-9</span> mysqld</span></code></pre></div>
<p>或是使用 <code>systemctl</code> 指令關閉 mysql 服務</p>
<p><code>{.bash prefixed} systemctl stop mysql.service</code></p>
<p>接著使用 mysqld 指令啟動 mysql 並指定 <code>--user</code>、<code>--defaults-file</code> 與 <code>--init-file</code> 參數。</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode bash prefixed_root"><code class="sourceCode bash"><span id="cb293-1"><a href="%E5%85%B6%E4%BB%96.html#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysqld</span> <span class="at">--defaults-file</span><span class="op">=</span>/etc/mysql/mysql.conf.d/mysqld.cnf <span class="dt">\ </span></span>
<span id="cb293-2"><a href="%E5%85%B6%E4%BB%96.html#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="ex">--user=mysql</span> <span class="dt">\ </span></span>
<span id="cb293-3"><a href="%E5%85%B6%E4%BB%96.html#cb293-3" aria-hidden="true" tabindex="-1"></a><span class="ex">--init-file=/tmp/mysql-init</span> <span class="kw">&amp;</span></span></code></pre></div>
<ul>
<li><p><code>--defaults-file</code>: MySQL 預設啟動的設定檔案</p></li>
<li><p><code>--user</code>: 以使用者 <code>mysql</code> 執行</p></li>
<li><p><code>--init-file</code>: 初始化時，執行 <code>/tmp/mysql-init</code> 指令，變更密碼</p></li>
<li><p><code>&amp;</code>: 將 mysql deamon 放至背景執行。</p></li>
</ul>
<p>此時，應該可以正常登入了。</p>
<div class="infobox caution">
<p>如果不行的話，請檢查位於 <code>/var/log/mysql/error.log</code> 的錯誤紀錄，如果有看到類似 <code>/var/run/mysqld</code> 的錯誤，需要手動建立資料夾，並把權限變更為 <code>mysql</code> 用戶的權限。 操作完之後再從關閉 mysql 服務開始，再嘗試一次。</p>
<p>參考指令如下：</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode bash prefixed_root"><code class="sourceCode bash"><span id="cb294-1"><a href="%E5%85%B6%E4%BB%96.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> /var/run/mysqld <span class="kw">&amp;&amp;</span> <span class="fu">chown</span> mysql.mysql /var/run/mysqld</span></code></pre></div>
</div>
<p>最後以正常的服務啟動 mysql：</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode bash prefixed_root"><code class="sourceCode bash"><span id="cb295-1"><a href="%E5%85%B6%E4%BB%96.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> restart mysql.service</span></code></pre></div>
<p>退出 root 帳號</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode bash prefixed_root"><code class="sourceCode bash"><span id="cb296-1"><a href="%E5%85%B6%E4%BB%96.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span></span></code></pre></div>
<p>試以新密碼登入 mysql root 帳號：</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode bash prefixed"><code class="sourceCode bash"><span id="cb297-1"><a href="%E5%85%B6%E4%BB%96.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> root <span class="at">-p</span></span></code></pre></div>
<p>成功 🎊</p>
<pre class="console_output"><code>Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 17
Server version: 8.0.26-0ubuntu0.20.04.3 (Ubuntu)

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; </code></pre>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="%E5%B8%B3%E8%99%9F%E7%AE%A1%E7%90%86.html"><span class="header-section-number">B</span> 帳號管理</a></div>
<div class="next"><a href="%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99.html">參考資料</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="header-section-number">C</span> 其他</a></li>
<li><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E9%A0%90%E8%A8%AD%E7%9A%84%E6%96%87%E6%9C%AC%E7%B7%A8%E8%BC%AF%E5%99%A8"><span class="header-section-number">C.1</span> 更改預設的文本編輯器</a></li>
<li><a class="nav-link" href="#mysql-8.0-root-%E5%AF%86%E7%A2%BC%E9%87%8D%E8%A8%AD"><span class="header-section-number">C.2</span> Mysql 8.0 root 密碼重設</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/exkuretrol/MCU-ASIS/blob/main/98-appendix.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/exkuretrol/MCU-ASIS/edit/main/98-appendix.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>MCU ASIS Ubuntu 系統安裝指南</strong>" was written by Chiawei Chen. It was last built on 2023-07-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
